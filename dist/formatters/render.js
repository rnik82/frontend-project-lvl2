"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _lodash = _interopRequireDefault(require("lodash"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const stringify = (object, gap) => {
  const keys = Object.keys(object);
  const result = keys.reduce((acc, key) => `${acc}${' '.repeat(gap)}${key}: ${object[key]}`, '');
  return `{\n${result}\n${' '.repeat(gap - 4)}}`;
};

const render = (ast, gap = 0) => {
  const sign = {
    unchanged: '  ',
    added: '+ ',
    deleted: '- '
  };
  const result = ast.reduce((acc, {
    status,
    key,
    value,
    value2,
    children
  }) => {
    if (children) {
      return `${acc}\n${' '.repeat(gap + 2)}${sign[status]}${key}: ${render(_lodash.default.flatten(children), gap + 4)}`;
    }

    const newValue = _lodash.default.isObject(value) ? stringify(value, gap + 8) : value;

    if (value2) {
      const newValue2 = _lodash.default.isObject(value2) ? stringify(value2, gap + 8) : value2;
      return `${acc}\n${' '.repeat(gap + 2)}${sign['deleted']}${key}: ${newValue}
      ${' '.repeat(gap - 4)}${sign['added']}${key}: ${newValue2}`;
    }

    return `${acc}\n${' '.repeat(gap + 2)}${sign[status]}${key}: ${newValue}`;
  }, '');
  return `{${result}\n${' '.repeat(gap)}}`;
};

var _default = render;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mb3JtYXR0ZXJzL3JlbmRlci5qcyJdLCJuYW1lcyI6WyJzdHJpbmdpZnkiLCJvYmplY3QiLCJnYXAiLCJrZXlzIiwiT2JqZWN0IiwicmVzdWx0IiwicmVkdWNlIiwiYWNjIiwia2V5IiwicmVwZWF0IiwicmVuZGVyIiwiYXN0Iiwic2lnbiIsInVuY2hhbmdlZCIsImFkZGVkIiwiZGVsZXRlZCIsInN0YXR1cyIsInZhbHVlIiwidmFsdWUyIiwiY2hpbGRyZW4iLCJfIiwiZmxhdHRlbiIsIm5ld1ZhbHVlIiwiaXNPYmplY3QiLCJuZXdWYWx1ZTIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLFNBQVMsR0FBRyxDQUFDQyxNQUFELEVBQVNDLEdBQVQsS0FBaUI7QUFDL0IsUUFBTUMsSUFBSSxHQUFHQyxNQUFNLENBQUNELElBQVAsQ0FBWUYsTUFBWixDQUFiO0FBQ0EsUUFBTUksTUFBTSxHQUFHRixJQUFJLENBQUNHLE1BQUwsQ0FBWSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBZSxHQUFFRCxHQUFJLEdBQUUsSUFBSUUsTUFBSixDQUFXUCxHQUFYLENBQWdCLEdBQUVNLEdBQUksS0FBSVAsTUFBTSxDQUFDTyxHQUFELENBQU0sRUFBekUsRUFBNEUsRUFBNUUsQ0FBZjtBQUNBLFNBQVEsTUFBS0gsTUFBTyxLQUFJLElBQUlJLE1BQUosQ0FBV1AsR0FBRyxHQUFHLENBQWpCLENBQW9CLEdBQTVDO0FBQ0gsQ0FKRDs7QUFNQSxNQUFNUSxNQUFNLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNVCxHQUFHLEdBQUcsQ0FBWixLQUFrQjtBQUMvQixRQUFNVSxJQUFJLEdBQUc7QUFDWEMsSUFBQUEsU0FBUyxFQUFFLElBREE7QUFFWEMsSUFBQUEsS0FBSyxFQUFFLElBRkk7QUFHWEMsSUFBQUEsT0FBTyxFQUFFO0FBSEUsR0FBYjtBQU1BLFFBQU1WLE1BQU0sR0FBR00sR0FBRyxDQUFDTCxNQUFKLENBQVcsQ0FBQ0MsR0FBRCxFQUFNO0FBQUVTLElBQUFBLE1BQUY7QUFBVVIsSUFBQUEsR0FBVjtBQUFlUyxJQUFBQSxLQUFmO0FBQXNCQyxJQUFBQSxNQUF0QjtBQUE4QkMsSUFBQUE7QUFBOUIsR0FBTixLQUFtRDtBQUMzRSxRQUFJQSxRQUFKLEVBQWM7QUFDWixhQUFRLEdBQUVaLEdBQUksS0FBSSxJQUFJRSxNQUFKLENBQVdQLEdBQUcsR0FBRyxDQUFqQixDQUFvQixHQUFFVSxJQUFJLENBQUNJLE1BQUQsQ0FBUyxHQUFFUixHQUFJLEtBQUlFLE1BQU0sQ0FBQ1UsZ0JBQUVDLE9BQUYsQ0FBVUYsUUFBVixDQUFELEVBQXNCakIsR0FBRyxHQUFHLENBQTVCLENBQStCLEVBQXBHO0FBQ0Q7O0FBQ0QsVUFBTW9CLFFBQVEsR0FBR0YsZ0JBQUVHLFFBQUYsQ0FBV04sS0FBWCxJQUFvQmpCLFNBQVMsQ0FBQ2lCLEtBQUQsRUFBUWYsR0FBRyxHQUFHLENBQWQsQ0FBN0IsR0FBZ0RlLEtBQWpFOztBQUNBLFFBQUlDLE1BQUosRUFBWTtBQUNWLFlBQU1NLFNBQVMsR0FBR0osZ0JBQUVHLFFBQUYsQ0FBV0wsTUFBWCxJQUFxQmxCLFNBQVMsQ0FBQ2tCLE1BQUQsRUFBU2hCLEdBQUcsR0FBRyxDQUFmLENBQTlCLEdBQWtEZ0IsTUFBcEU7QUFDQSxhQUFRLEdBQUVYLEdBQUksS0FBSSxJQUFJRSxNQUFKLENBQVdQLEdBQUcsR0FBRyxDQUFqQixDQUFvQixHQUFFVSxJQUFJLENBQUMsU0FBRCxDQUFZLEdBQUVKLEdBQUksS0FBSWMsUUFBUztRQUN6RSxJQUFJYixNQUFKLENBQVdQLEdBQUcsR0FBRyxDQUFqQixDQUFvQixHQUFFVSxJQUFJLENBQUMsT0FBRCxDQUFVLEdBQUVKLEdBQUksS0FBSWdCLFNBQVUsRUFEMUQ7QUFFRDs7QUFDRCxXQUFRLEdBQUVqQixHQUFJLEtBQUksSUFBSUUsTUFBSixDQUFXUCxHQUFHLEdBQUcsQ0FBakIsQ0FBb0IsR0FBRVUsSUFBSSxDQUFDSSxNQUFELENBQVMsR0FBRVIsR0FBSSxLQUFJYyxRQUFTLEVBQXhFO0FBQ0QsR0FYYyxFQVdaLEVBWFksQ0FBZjtBQVlBLFNBQVEsSUFBR2pCLE1BQU8sS0FBSSxJQUFJSSxNQUFKLENBQVdQLEdBQVgsQ0FBZ0IsR0FBdEM7QUFDRCxDQXBCRDs7ZUFzQmVRLE0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5jb25zdCBzdHJpbmdpZnkgPSAob2JqZWN0LCBnYXApID0+IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgICBjb25zdCByZXN1bHQgPSBrZXlzLnJlZHVjZSgoYWNjLCBrZXkpID0+IGAke2FjY30keycgJy5yZXBlYXQoZ2FwKX0ke2tleX06ICR7b2JqZWN0W2tleV19YCwgJycpO1xuICAgIHJldHVybiBge1xcbiR7cmVzdWx0fVxcbiR7JyAnLnJlcGVhdChnYXAgLSA0KX19YFxufTtcblxuY29uc3QgcmVuZGVyID0gKGFzdCwgZ2FwID0gMCkgPT4ge1xuICBjb25zdCBzaWduID0ge1xuICAgIHVuY2hhbmdlZDogJyAgJyxcbiAgICBhZGRlZDogJysgJyxcbiAgICBkZWxldGVkOiAnLSAnLFxuICB9O1xuICAgIFxuICBjb25zdCByZXN1bHQgPSBhc3QucmVkdWNlKChhY2MsIHsgc3RhdHVzLCBrZXksIHZhbHVlLCB2YWx1ZTIsIGNoaWxkcmVuIH0pID0+IHtcbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgIHJldHVybiBgJHthY2N9XFxuJHsnICcucmVwZWF0KGdhcCArIDIpfSR7c2lnbltzdGF0dXNdfSR7a2V5fTogJHtyZW5kZXIoXy5mbGF0dGVuKGNoaWxkcmVuKSwgZ2FwICsgNCl9YDtcbiAgICB9XG4gICAgY29uc3QgbmV3VmFsdWUgPSBfLmlzT2JqZWN0KHZhbHVlKSA/IHN0cmluZ2lmeSh2YWx1ZSwgZ2FwICsgOCkgOiB2YWx1ZTtcbiAgICBpZiAodmFsdWUyKSB7XG4gICAgICBjb25zdCBuZXdWYWx1ZTIgPSBfLmlzT2JqZWN0KHZhbHVlMikgPyBzdHJpbmdpZnkodmFsdWUyLCBnYXAgKyA4KSA6IHZhbHVlMjtcbiAgICAgIHJldHVybiBgJHthY2N9XFxuJHsnICcucmVwZWF0KGdhcCArIDIpfSR7c2lnblsnZGVsZXRlZCddfSR7a2V5fTogJHtuZXdWYWx1ZX1cbiAgICAgICR7JyAnLnJlcGVhdChnYXAgLSA0KX0ke3NpZ25bJ2FkZGVkJ119JHtrZXl9OiAke25ld1ZhbHVlMn1gO1xuICAgIH1cbiAgICByZXR1cm4gYCR7YWNjfVxcbiR7JyAnLnJlcGVhdChnYXAgKyAyKX0ke3NpZ25bc3RhdHVzXX0ke2tleX06ICR7bmV3VmFsdWV9YDtcbiAgfSwgJycpO1xuICByZXR1cm4gYHske3Jlc3VsdH1cXG4keycgJy5yZXBlYXQoZ2FwKX19YDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJlbmRlcjtcbiJdfQ==